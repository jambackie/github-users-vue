(function(){"use strict";var e={804:function(e,t,s){var o=s(9242),r=s(3396);function n(e,t){const s=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(s)}var i=s(89);const u={},a=(0,i.Z)(u,[["render",n]]);var c=a,l=s(678),p=s(7139);const h={class:"container"},_=(0,r._)("h1",{class:"heading"},"Github users search",-1),g={class:"input"},m=(0,r.Uk)(" Total users: "),E={class:"items"},d=["onClick"],S=["src"],v={class:"item__name"};function T(e,t,s,n,i,u){return(0,r.wg)(),(0,r.iD)("div",h,[_,(0,r._)("label",g,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>u.input=e),placeholder:"Login"},null,512),[[o.nr,u.input]]),m,(0,r._)("b",null,(0,p.zw)(u.total),1)]),(0,r._)("div",E,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(u.users,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"item",onClick:t=>u.clickUser(e)},[(0,r._)("img",{class:"item__img",src:e.avatar_url,alt:"pic"},null,8,S),(0,r._)("h2",v,(0,p.zw)(e.login),1)],8,d)))),128))])])}var f=s(65),R={name:"HomeView",data(){return{inputValue:""}},mounted(){this.inputValue=this.$store.state.input,window.scrollTo(0,this.scroll),window.addEventListener("scroll",this.onScroll)},beforeRouteLeave(){this.SAVE_SCROLL(window.scrollY),this.UPDATE_INPUT(this.inputValue)},unmounted(){window.removeEventListener("scroll",this.onScroll)},computed:{...(0,f.Se)(["USERS_COUNT","USERS_LIST"]),...(0,f.rn)(["input","scroll","usersBottom"]),users(){return this.USERS_LIST},total(){return this.USERS_COUNT},input:{get(){return this.inputValue},set(e){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.inputValue=e,this.getUsers()}),1e3)}}},watch:{usersBottom:"addUsers"},methods:{...(0,f.nv)(["GET_USERS","ADD_USERS"]),...(0,f.OI)(["RESET_USERS","SET_USERPAGE","UPDATE_INPUT","SAVE_SCROLL","GET_BOTTOM"]),getUsers(){this.inputValue.length>0?this.GET_USERS(this.inputValue):this.RESET_USERS()},clickUser(e){this.$router.push(`/${e.login}`),this.SET_USERPAGE(e)},onScroll(){let e=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;e&&this.GET_BOTTOM("usersBottom")},addUsers(){this.usersBottom&&this.users.length<this.total&&this.ADD_USERS(this.inputValue)}}};const w=(0,i.Z)(R,[["render",T]]);var O=w;const P={class:"container"},D={class:"user"},U=["src"],A={class:"user__name"},b={class:"user__active"},y=["href"],k={class:"repos"},B=(0,r._)("h2",null,"Repositories:",-1),j=["href"];function L(e,t,s,o,n,i){return(0,r.wg)(),(0,r.iD)("div",P,[(0,r._)("div",D,[(0,r._)("button",{class:"user__btn",onClick:t[0]||(t[0]=(...e)=>i.goBack&&i.goBack(...e))}),(0,r._)("img",{class:"user__img",src:i.user.avatar_url,alt:"user"},null,8,U),(0,r._)("div",null,[(0,r._)("h1",A,(0,p.zw)(i.user.login),1),(0,r._)("span",b,(0,p.zw)(i.active),1),(0,r._)("a",{class:"user__github",href:i.user.html_url,target:"_blank"},"GitHub",8,y)])]),(0,r._)("div",k,[B,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.repos,(e=>((0,r.wg)(),(0,r.iD)("a",{key:e.id,href:e.html_url,class:"repos__item",target:"_blank"},(0,p.zw)(e.name),9,j)))),128))])])}var V={mounted(){window.scrollTo(0,0),this.getRepos(),window.addEventListener("scroll",this.onScroll)},unmounted(){window.removeEventListener("scroll",this.onScroll)},computed:{...(0,f.rn)(["userPage","reposBottom"]),user(){return this.userPage},repos(){return this.userPage.repos},active(){return`Last active: ${this.user.lastEvent?new Date(this.user.lastEvent).toLocaleString():"never"}`}},watch:{reposBottom:"addRepos"},methods:{...(0,f.nv)(["LOAD_DATA","ADD_REPOS"]),...(0,f.OI)(["GET_BOTTOM"]),getRepos(){this.LOAD_DATA(this.user.login)},goBack(){this.$router.go(-1)},onScroll(){let e=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;e&&this.GET_BOTTOM("reposBottom")},addRepos(){this.user.reposEnd||this.ADD_REPOS(this.user.login)}}};const z=(0,i.Z)(V,[["render",L]]);var G=z;const q=[{path:"/",component:O},{path:"/:login",component:G}],H=(0,l.p7)({history:(0,l.PO)("/github-users-vue/"),routes:q});var $=H,C=(0,f.MT)({state:{users:{items:[],total_count:0},userPage:{},input:"",scroll:0,usersBottom:!1,reposBottom:!1,usersRequestPage:2,reposRequestPage:2},getters:{USERS_LIST:e=>e.users.items,USERS_COUNT:e=>e.users.total_count},mutations:{SET_USERS(e,t){e.users=t,e.usersRequestPage=2,e.usersBottom=!1},RESET_USERS(e){e.users={items:[],total_count:0}},ADD_USERS(e,t){e.users.items=e.users.items.concat(t.items),e.usersRequestPage=e.usersRequestPage+1,e.usersBottom=!1},SET_USERPAGE(e,t){e.userPage=t,e.reposBottom=!1,e.reposRequestPage=2,e.userPage.reposEnd=!1},SET_REPOS(e,t){e.userPage.repos=t,t.length<100&&(e.userPage.reposEnd=!0)},SET_EVENT(e,t){e.userPage.lastEvent=t.length>0?t[0].created_at:null},ADD_REPOS(e,t){0===t.length&&(e.userPage.reposEnd=!0),e.userPage.repos=e.userPage.repos.concat(t),e.reposRequestPage=e.reposRequestPage+1,e.reposBottom=!1},UPDATE_INPUT(e,t){e.input=t},SAVE_SCROLL(e,t){e.scroll=t},GET_BOTTOM(e,t){e[t]=!0}},actions:{async GET_USERS({commit:e},t){try{let s=await fetch(`https://api.github.com/search/users?q=${t}&sort=repositories&per_page=24&page=1`,{Accept:{access_token:"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",scope:"repo,gist",token_type:"bearer"}});s=await s.json(),e("SET_USERS",s)}catch(s){console.log(s)}},async LOAD_DATA({commit:e},t){const s={Accept:{access_token:"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",scope:"repo,gist",token_type:"bearer"}};try{let o=await fetch(`https://api.github.com/users/${t}/repos?per_page=100&page-1`,s);o=await o.json(),e("SET_REPOS",o);let r=await fetch(`https://api.github.com/users/${t}/events`,s);r=await r.json(),e("SET_EVENT",r)}catch(o){console.log(o)}},async ADD_USERS({commit:e},t){try{let s=await fetch(`https://api.github.com/search/users?q=${t}&sort=repositories&per_page=24&page=${this.state.usersRequestPage}`,{Accept:{access_token:"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",scope:"repo,gist",token_type:"bearer"}});s=await s.json(),e("ADD_USERS",s)}catch(s){console.log(s)}},async ADD_REPOS({commit:e},t){const s={Accept:{access_token:"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",scope:"repo,gist",token_type:"bearer"}};try{let o=await fetch(`https://api.github.com/users/${t}/repos?per_page=100&page=${this.state.reposRequestPage}`,s);o=await o.json(),e("ADD_REPOS",o)}catch(o){console.log(o)}}}});(0,o.ri)(c).use(C).use($).mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,n){if(!o){var i=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],n=e[l][2];for(var u=!0,a=0;a<o.length;a++)(!1&n||i>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[a])}))?o.splice(a--,1):(u=!1,n<i&&(i=n));if(u){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[o,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,i=o[0],u=o[1],a=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in u)s.o(u,r)&&(s.m[r]=u[r]);if(a)var l=a(s)}for(t&&t(o);c<i.length;c++)n=i[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(l)},o=self["webpackChunkgithub_users_vue"]=self["webpackChunkgithub_users_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(804)}));o=s.O(o)})();
//# sourceMappingURL=app.977c3ba5.js.map